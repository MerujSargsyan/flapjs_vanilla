<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: compute.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: compute.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/** @module compute */

import * as consts from './consts.js';

/**
 * finds all letters used in the transitions
 * @param {Object} graph - the graph whose alphebet is to be computed
 * @returns {Set&lt;string>} a set of letters used in the transitions
 */
export function compute_alphabet(graph) {
  const alphabet = new Set();
  for (let vertex of Object.values(graph)) {
    for (let edge of vertex.out) {alphabet.add(edge.transition);}
  }
  return alphabet;
}

/**
 * finds the start vertex
 * @param {Object} graph - the graph whose starting vertex is to be computed
 * @returns {string} the start of the graph, null of graph empty
 */
export function find_start(graph) {
  for (let [v, vertex] of Object.entries(graph)) {
    if (vertex.is_start) {return v;}
  }
  return null;
}

/**
 * compute the set of closure of current states (in-place and returns)
 * @param {Object} graph - the graph containing the cur_states
 * @param {Set&lt;string>} cur_states - current states the machine is in
 * @returns {Set&lt;string>} the closure of cur_states
 */
export function closure(graph, cur_states) {
  let old_size = 0;  // initialize size to be zero
  while (cur_states.size > old_size) {  // if we have added new state to the mix, then keep going
    old_size = cur_states.size;
    for (let v of cur_states) {
      for (let edge of graph[v].out) {
        if (edge.transition === consts.EMPTY_TRANSITION) {cur_states.add(edge.to);}
      }
    }
  }
  return cur_states;
}

/**
 * checks if the set of states provided contains a final state
 * @param {Object} graph - the graph containing the cur_states
 * @param {Set&lt;string>} cur_states - the set of current states we want to check if any is a final state
 * @returns {boolean} true iff some state in cur_states is a final state
 */
export function contains_final(graph, cur_states) {
  for (let v of cur_states) {
    if (graph[v].is_final) {return true;}
  }
  return false;
}

/**
 * check if the input is accepted
 * @param {Object} graph - machine graph
 * @param {string} input - input string
 * @returns {boolean} true iff the input is accepted by the machine
 */
export function run_input(graph, input) {
  if (!Object.keys(graph).length) {return false;}  // empty graph
  let cur_states = closure(new Set([find_start()]));  // find closure of start
  for (let c of input) {
    const new_states = new Set();
    for (let v of cur_states) {
      for (let edge of graph[v].out) {
        if (edge.transition === c) {new_states.add(edge.to);}
      }
    }
    cur_states = closure(new_states);
    if (!cur_states.size) {return false;}  // can't go anywhere
  }
  return contains_final(cur_states);
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-compute.html">compute</a></li><li><a href="module-consts.html">consts</a></li><li><a href="module-drawing.html">drawing</a></li><li><a href="module-graph_ops.html">graph_ops</a></li><li><a href="module-history.html">history</a></li><li><a href="module-index.html">index</a></li><li><a href="module-linalg.html">linalg</a></li><li><a href="module-menus.html">menus</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Sun Jan 30 2022 04:34:41 GMT-0800 (Pacific Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
